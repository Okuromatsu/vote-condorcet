{% extends 'voting/base.html' %}
{% load i18n %}

{% block title %}{% trans "About Condorcet Voting" %} - Condorcet Vote{% endblock %}

{% block content %}
<div class="container-fluid">
    <!-- Hero Section -->
    <div class="row bg-primary text-white py-5 mb-5">
        <div class="col-lg-8 offset-lg-2">
            <h1>üó≥Ô∏è {% trans "The Condorcet Voting Method" %}</h1>
            <p class="lead">{% trans "A fair and mathematically superior voting system for collective decision-making" %}</p>
        </div>
    </div>

    <!-- Main Content -->
    <div class="row">
        <div class="col-lg-8 offset-lg-2">
            <!-- What is Condorcet -->
            <section class="mb-5">
                <h2>{% trans "What is Condorcet Voting?" %}</h2>
                <p>
                    {% trans "The Condorcet method is a voting system named after the 18th-century French mathematician and philosopher" %}
                    <strong>{% trans "Marquis de Condorcet" %}</strong>. {% trans "It's based on a simple but powerful principle:" %}
                </p>
                <div class="alert alert-info">
                    <strong>{% trans "The Condorcet winner is the candidate who would beat every other candidate in a head-to-head matchup." %}</strong>
                </div>
                <p>
                    {% trans "In Condorcet voting, each voter ranks all candidates by preference (1st choice, 2nd choice, etc.). The system then performs pairwise comparisons between all candidates to find the most preferred candidate overall." %}
                </p>
            </section>

            <!-- How It Works -->
            <section class="mb-5">
                <h2>{% trans "How It Works" %}</h2>
                <h4>{% trans "Step 1: Voters Rank Candidates" %}</h4>
                <p>{% trans "Instead of voting for just one candidate, voters rank ALL candidates in order of preference:" %}</p>
                <div class="bg-light p-3 rounded mb-3">
                    {% trans "Example: \"Best Programming Language\"" %}<br>
                    1st: Python<br>
                    2nd: JavaScript<br>
                    3rd: Java
                </div>

                <h4>{% trans "Step 2: Pairwise Comparisons" %}</h4>
                <p>{% trans "The system compares each candidate against every other candidate head-to-head:" %}</p>
                <div class="bg-light p-3 rounded mb-3">
                    <strong>{% trans "Python vs JavaScript:" %}</strong> {% trans "How many voters prefer Python? How many prefer JavaScript?" %}<br>
                    <strong>{% trans "Python vs Java:" %}</strong> {% trans "How many voters prefer Python? How many prefer Java?" %}<br>
                    <strong>{% trans "JavaScript vs Java:" %}</strong> {% trans "How many voters prefer JavaScript? How many prefer Java?" %}
                </div>

                <h4>{% trans "Step 3: Find the Winner" %}</h4>
                <p>
                    {% trans "If one candidate beats ALL others in their head-to-head matchups, they are the" %} <strong>{% trans "Condorcet winner" %}</strong>.
                </p>
            </section>

            <!-- Example -->
            <section class="mb-5">
                <h2>{% trans "Real Example: The Spoiler Effect" %}</h2>
                <p>{% trans "Imagine a vote for the 'Best Programming Language' with three candidates:" %} <strong>Python</strong>, <strong>Ruby</strong>, {% trans "and" %} <strong>Assembly</strong>.</p>
                <p>{% trans "Python and Ruby are similar (modern, dynamic), while Assembly is very different (low-level). Ideally, the winner should reflect the majority's preference for modern languages, but traditional voting fails here." %}</p>

                <p><strong>{% trans "Votes:" %}</strong> {% trans "100 voters ranked them as follows:" %}</p>
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>{% trans "Voters" %}</th>
                            <th>{% trans "1st Choice" %}</th>
                            <th>{% trans "2nd Choice" %}</th>
                            <th>{% trans "3rd Choice" %}</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>35</td>
                            <td>Python</td>
                            <td>Ruby</td>
                            <td>Assembly</td>
                        </tr>
                        <tr>
                            <td>25</td>
                            <td>Ruby</td>
                            <td>Python</td>
                            <td>Assembly</td>
                        </tr>
                        <tr>
                            <td>40</td>
                            <td>Assembly</td>
                            <td>Ruby</td>
                            <td>Python</td>
                        </tr>
                    </tbody>
                </table>

                <div class="row mb-4">
                    <div class="col-md-6">
                        <div class="card border-danger mb-3 h-100">
                            <div class="card-header bg-danger text-white">
                                ‚ùå {% trans "Traditional Voting (FPTP)" %}
                            </div>
                            <div class="card-body">
                                <p class="card-text">{% trans "Only 1st choices are counted:" %}</p>
                                <ul>
                                    <li>Python: 35%</li>
                                    <li>Ruby: 25%</li>
                                    <li><strong>Assembly: 40% (Winner)</strong></li>
                                </ul>
                                <p class="text-danger">
                                    <strong>{% trans "Problem:" %}</strong> {% trans "Assembly wins even though 60% of voters preferred a modern language (Python or Ruby). Python and Ruby split the vote, acting as spoilers for each other." %}
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card border-success mb-3 h-100">
                            <div class="card-header bg-success text-white">
                                ‚úÖ {% trans "Condorcet Voting" %}
                            </div>
                            <div class="card-body">
                                <p class="card-text">{% trans "We compare head-to-head:" %}</p>
                                <ul>
                                    <li>
                                        <strong>Ruby vs Assembly:</strong><br>
                                        25 (Ruby voters) + 35 (Python voters) = 60<br>
                                        vs 40 (Assembly voters)<br>
                                        ‚Üí <strong>{% trans "Ruby wins" %}</strong> (60% > 40%)
                                    </li>
                                    <li>
                                        <strong>Ruby vs Python:</strong><br>
                                        25 (Ruby voters) + 40 (Assembly voters) = 65<br>
                                        vs 35 (Python voters)<br>
                                        ‚Üí <strong>{% trans "Ruby wins" %}</strong> (65% > 35%)
                                    </li>
                                </ul>
                                <p class="text-success">
                                    <strong>{% trans "Result:" %}</strong> {% trans "Ruby beats everyone head-to-head. It is the true consensus winner." %}
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Advantages -->
            <section class="mb-5">
                <h2>{% trans "Why Condorcet is Superior" %}</h2>
                <p>{% trans "Traditional voting methods suffer from serious mathematical flaws that Condorcet solves." %}</p>

                <div class="row">
                    <div class="col-md-6 mb-4">
                        <h4>üö´ {% trans "Problems with Traditional Methods" %}</h4>
                        <ul class="list-group list-group-flush">
                            <li class="list-group-item">
                                <strong>{% trans "The Spoiler Effect" %}</strong><br>
                                <small class="text-muted">{% trans "Similar candidates split the vote, allowing a less popular candidate to win (violates Independence of Irrelevant Alternatives)." %}</small>
                            </li>
                            <li class="list-group-item">
                                <strong>{% trans "Strategic Voting (Non-sincerity)" %}</strong><br>
                                <small class="text-muted">{% trans "Voters are forced to vote for the 'lesser of two evils' instead of their true favorite to avoid wasting their vote." %}</small>
                            </li>
                            <li class="list-group-item">
                                <strong>{% trans "Non-Monotonicity" %}</strong><br>
                                <small class="text-muted">{% trans "In some systems (like Instant Runoff), ranking a candidate HIGHER can actually cause them to LOSE. This is a major flaw." %}</small>
                            </li>
                            <li class="list-group-item">
                                <strong>{% trans "Center Squeeze" %}</strong><br>
                                <small class="text-muted">{% trans "Moderate candidates who would beat everyone head-to-head often lose because they lack strong 'first choice' support." %}</small>
                            </li>
                        </ul>
                    </div>
                    <div class="col-md-6 mb-4">
                        <h4>‚úÖ {% trans "Condorcet Advantages" %}</h4>
                        <ul class="list-group list-group-flush">
                            <li class="list-group-item">
                                <strong>{% trans "Condorcet Consistency" %}</strong><br>
                                <small class="text-muted">{% trans "If a candidate can beat every other candidate in a one-on-one race, they are guaranteed to win." %}</small>
                            </li>
                            <li class="list-group-item">
                                <strong>{% trans "Sincere Voting" %}</strong><br>
                                <small class="text-muted">{% trans "Voters can support their true favorite without fear of helping their least favorite win." %}</small>
                            </li>
                            <li class="list-group-item">
                                <strong>{% trans "Resistance to Manipulation" %}</strong><br>
                                <small class="text-muted">{% trans "It is much harder to manipulate the outcome through strategic nomination or voting." %}</small>
                            </li>
                            <li class="list-group-item">
                                <strong>{% trans "Stable Consensus" %}</strong><br>
                                <small class="text-muted">{% trans "Selects the candidate with the broadest appeal, not just the most passionate minority." %}</small>
                            </li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- The Condorcet Paradox -->
            <section class="mb-5">
                <h2>{% trans "The Condorcet Paradox" %}</h2>
                <p>
                    {% trans "Sometimes, no candidate beats all others in pairwise comparisons. This creates a cycle: A beats B, B beats C, but C beats A. This is called the" %} <strong>{% trans "Condorcet Paradox" %}</strong>.
                </p>

                <h4>{% trans "Example:" %}</h4>
                <p>{% trans "Imagine 3 voters ranking 3 candidates:" %}</p>
                <table class="table table-striped">
                    <tr>
                        <td><strong>{% trans "Voter 1:" %}</strong> A > B > C</td>
                        <td><strong>{% trans "Voter 2:" %}</strong> B > C > A</td>
                        <td><strong>{% trans "Voter 3:" %}</strong> C > A > B</td>
                    </tr>
                </table>

                <p>{% trans "Pairwise results:" %}</p>
                <ul>
                    <li>A vs B: {% trans "A wins" %} ({% trans "Voters" %} 1,3)</li>
                    <li>B vs C: {% trans "B wins" %} ({% trans "Voters" %} 1,2)</li>
                    <li>C vs A: {% trans "C wins" %} ({% trans "Voters" %} 2,3)</li>
                </ul>

                <div class="alert alert-info">
                    {% trans "It's a cycle! No single Condorcet winner exists." %}
                </div>

                <h4>{% trans "Solution: Tiebreaker Methods" %}</h4>
                <p>{% trans "When no Condorcet winner exists, we use tiebreaker methods:" %}</p>

                <div class="accordion" id="tiebreakerAccordion">
                    <div class="accordion-item">
                        <h5 class="accordion-header">
                            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#schulze">
                                <strong>{% trans "Schulze Method (Recommended)" %}</strong>
                            </button>
                        </h5>
                        <div id="schulze" class="accordion-collapse collapse show" data-bs-parent="#tiebreakerAccordion">
                            <div class="accordion-body">
                                <p>
                                    {% trans "Finds the candidate with the strongest 'path' through the preference graph. It's the most sophisticated method and often preferred." %}
                                </p>
                                <strong>{% trans "Advantages:" %}</strong>
                                <ul>
                                    <li>{% trans "Resolves cycles fairly" %}</li>
                                    <li>{% trans "Based on strong mathematical principles" %}</li>
                                    <li>{% trans "Widely used in consensus voting" %}</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="accordion-item">
                        <h5 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#borda">
                                <strong>{% trans "Borda Count" %}</strong>
                            </button>
                        </h5>
                        <div id="borda" class="accordion-collapse collapse" data-bs-parent="#tiebreakerAccordion">
                            <div class="accordion-body">
                                <p>
                                    {% trans "Each voter awards points based on ranking position (1st = n points, 2nd = n-1 points, etc.). The candidate with the most points wins." %}
                                </p>
                                <strong>{% trans "Advantages:" %}</strong>
                                <ul>
                                    <li>{% trans "Simple to understand and calculate" %}</li>
                                    <li>{% trans "Considers all preferences" %}</li>
                                </ul>
                                <strong>{% trans "Disadvantages:" %}</strong>
                                <ul>
                                    <li>{% trans "Can be susceptible to vote splitting" %}</li>
                                    <li>{% trans "May not reflect true majority preferences" %}</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="accordion-item">
                        <h5 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#random">
                                <strong>{% trans "Random Selection" %}</strong>
                            </button>
                        </h5>
                        <div id="random" class="accordion-collapse collapse" data-bs-parent="#tiebreakerAccordion">
                            <div class="accordion-body">
                                <p>
                                    {% trans "When a cycle is truly intractable and all methods tie, randomly select from top candidates. This is rarely used but available as a fallback." %}
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- When to Use -->
            <section class="mb-5">
                <h2>{% trans "When Should You Use Condorcet Voting?" %}</h2>
                <ul>
                    <li>‚úÖ {% trans "Team decisions (choosing a project, tooling, etc.)" %}</li>
                    <li>‚úÖ {% trans "Community elections where fairness is important" %}</li>
                    <li>‚úÖ {% trans "Awards or merit-based selections" %}</li>
                    <li>‚úÖ {% trans "Any situation where multiple preferences matter" %}</li>
                    <li>‚úÖ {% trans "When you want to avoid controversial outcomes" %}</li>
                </ul>
            </section>

            <!-- Call to Action -->
            <section class="mb-5 text-center">
                <h2>{% trans "Ready to Vote Fairly?" %}</h2>
                <p>{% trans "Create a poll and experience Condorcet voting yourself!" %}</p>
                <a href="{% url 'voting:create_poll' %}" class="btn btn-lg btn-primary">
                    {% trans "Create a Poll Now" %}
                </a>
            </section>
        </div>
    </div>
</div>

<style>
    .bg-opacity-10 {
        background-color: rgba(var(--bs-danger-rgb), 0.1) !important;
    }
    .bg-warning.bg-opacity-10 {
        background-color: rgba(var(--bs-warning-rgb), 0.1) !important;
    }
    .bg-success.bg-opacity-10 {
        background-color: rgba(var(--bs-success-rgb), 0.1) !important;
    }
</style>
{% endblock %}
